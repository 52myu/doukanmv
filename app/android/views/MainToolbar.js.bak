'use strict';

/*
* home toolbar :[home,category,search,user,setting]
*/

var React = require('react-native');

var {
  AppRegistry,
  Platform,
  PixelRatio,
  StyleSheet,
  Text,
  View,
  Image,
  TouchableNativeFeedback,
  TouchableHighlight,
  ToastAndroid,
} = React;

var SwitchAndroid = require('SwitchAndroid');
var ToolbarAndroid = require('ToolbarAndroid');
var statusBarSize = Platform.OS == 'ios' ? 10 : 0;

// Const menu config 
/*var CONST_MENUS = [
		{icon:'home',text:'主页',value:'home',status:{normal:require('image!ic_home'),active:require('image!ic_home_active')}},
		{icon:'list-ol',text:'分类',value:'category',status:{normal:require('image!ic_list_ol'),active:require('image!ic_list_ol_active')}},
		{icon:'search',text:'搜索',value:'search',status:{normal:require('image!ic_search'),active:require('image!ic_search_active')}},
		{icon:'user',text:'用户中心',value:'user',status:{normal:require('image!ic_user'),active:require('image!ic_user_active')}},
		{icon:'cog',text:'设置',value:'settings',status:{normal:require('image!ic_cog'),active:require('image!ic_cog_active')}},
	];
*/var CONST_MENUS = [
		{icon:'home',text:'主页',value:'home'},
		{icon:'list-ol',text:'分类',value:'category',status:{normal:require('image!ic_list_ol'),active:require('image!ic_list_ol_active')}},
		{icon:'search',text:'搜索',value:'search',status:{normal:require('image!ic_search'),active:require('image!ic_search_active')}},
		{icon:'user',text:'用户中心',value:'user',status:{normal:require('image!ic_user'),active:require('image!ic_user_active')}},
		{icon:'cog',text:'设置',value:'settings',status:{normal:require('image!ic_cog'),active:require('image!ic_cog_active')}},
	];


var MainToolbar = React.createClass({
	getInitialState: function () {
		return {
			active: 'home',
			isLoading: true,
		};
	},
	onSelect : function (name) {
		this.setState({active:name});
		this.props.onselect(name);
	},
	render: function () {
		var TouchableElement = TouchableHighlight;
		if (Platform.OS === 'android') {
			TouchableElement = TouchableNativeFeedback;	
		}
		var menus=CONST_MENUS.map((menu) =>{
				
				var isCurrent = menu.value == this.state.active;
				return (<TouchableElement onPress={()=> this.onSelect(menu.value)}>
							<View style={styles.actionItem}>
								<View style={styles.actionIconRow}>
									/*<Image source = {isCurrent? menu.status.active: menu.status.normal} style={styles.actionIcon}/>*/
									<Image source = {require('image!home')} style={styles.actionIcon}/>
								</View>
								<View style={styles.actionIconRow}>
									<Text style={[styles.actionText,isCurrent ? styles.actionActive:'']}>
										{menu.text}
									</Text>
								</View>
							</View>
					</TouchableElement>
				);
		 });

		return (
			<View {...this.props}>
				<View style={styles.actionsContainer}>
				{menus}
				</View>
			</View>
		);
	},
});

var styles = StyleSheet.create({
	actionsContainer: {
		height: 56,
		paddingTop: statusBarSize,
		flexDirection: 'row',
		borderTopWidth:1,
		borderTopColor:'#999999',
		backgroundColor:'#f4f4f4',
		alignItems: 'center',
	},
	actionActive: {
		color:'#0a78eb'
	},
	actionIconRow:{
		flexDirection: 'row',
		alignItems: 'center',
	},
	actionIcon: {
		width:32,
		height:32,
		flex:1,
		marginLeft: 8,
		marginRight: 8,
		flexDirection: 'row',
	},
	titleContainer: {
		flex: 1,
		alignSelf: 'center',
		backgroundColor: 'transparent'
	},
	actionText:{
		color: '#888888',
		textAlign: 'center'
	},
	actionItem: {
		flex: 1,
		height: 56,
		flexDirection: 'column',
		alignItems: 'center',
		justifyContent: 'center',
		paddingLeft: 8,
		paddingRight: 8,
		backgroundColor:'transparent',
	},
});

module.exports = MainToolbar;
